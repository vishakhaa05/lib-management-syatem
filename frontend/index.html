<!DOCTYPE html>
<html>
<head>
  <title>Library Management</title>
</head>
<body>

<h2>Add Book</h2>

<input id="name" placeholder="Book Name" />
<input id="author" placeholder="Author" />
<input id="category" placeholder="Category" />
<input id="quantity" placeholder="Quantity" />
<button onclick="addBook()">Add Book</button>

<h2>All Books</h2>
<ul id="bookList"></ul>

<script>
async function fetchBooks() {
  const res = await fetch("http://localhost:5000/books");
  const data = await res.json();

  const list = document.getElementById("bookList");
  list.innerHTML = "";

  data.forEach(book => {
    list.innerHTML += `<li>
      ${book.name} - ${book.author} 
      <button onclick="deleteBook(${book.id})">Delete</button>
    </li>`;
  });
}

async function addBook() {
  await fetch("http://localhost:5000/books", {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      name: document.getElementById("name").value,
      author: document.getElementById("author").value,
      category: document.getElementById("category").value,
      quantity: document.getElementById("quantity").value
    })
  });

  fetchBooks();
}

async function deleteBook(id) {
  await fetch(`http://localhost:5000/books/${id}`, {
    method: "DELETE"
  });
  fetchBooks();
}

fetchBooks();
</script>

</body>
</html>
